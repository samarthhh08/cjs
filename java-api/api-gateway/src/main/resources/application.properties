spring.application.name=api-gateway
server.port=5046
spring.main.web-application-type=reactive

spring.security.user.name=
spring.security.user.password=
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration


# ===============================
# Gateway Routes (ENV BASED)
# ===============================
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=http://${AUTH_SERVICE_HOST:localhost}:${AUTH_SERVICE_PORT:8083}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

spring.cloud.gateway.routes[1].id=auth-service
spring.cloud.gateway.routes[1].uri=http://${AUTH_SERVICE_HOST:localhost}:${AUTH_SERVICE_PORT:8083}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/users/**

spring.cloud.gateway.routes[2].id=cjs-service
spring.cloud.gateway.routes[2].uri=http://${CJS_SERVICE_HOST:localhost}:${CJS_SERVICE_PORT:8082}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/problems/**

spring.cloud.gateway.routes[3].id=cjs-service
spring.cloud.gateway.routes[3].uri=http://${CJS_SERVICE_HOST:localhost}:${CJS_SERVICE_PORT:8082}
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/code/**

spring.cloud.gateway.routes[4].id=cjs-service
spring.cloud.gateway.routes[4].uri=http://${CJS_SERVICE_HOST:localhost}:${CJS_SERVICE_PORT:8082}
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/ai/**
    

spring.cloud.gateway.routes[5].id=mcq-service
spring.cloud.gateway.routes[5].uri=http://${MCQ_SERVICE_HOST:localhost}:${MCQ_SERVICE_PORT:8085}
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/mcq/**

# ===============================
# CORS
# ===============================
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOriginPatterns=http://localhost:5173
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true
# ===============================
# Logging
# ===============================
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator=TRACE
